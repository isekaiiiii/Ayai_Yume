_G.AutoCollectFruits = true  -- Báº­t/táº¯t Auto nháº·t trÃ¡i
_G.AutoServerHop = true      -- Báº­t/táº¯t Auto Ä‘á»•i server náº¿u háº¿t trÃ¡i

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local function Notify(msg)
    game.StarterGui:SetCore("SendNotification", {
        Title = "Auto Fruit Collector",
        Text = msg,
        Duration = 3
    })
end

local function FindNearestFruit()
    local nearestFruit, nearestDistance = nil, math.huge
    for _, fruit in pairs(game.Workspace:GetChildren()) do
        if fruit:IsA("Model") and fruit:FindFirstChild("Handle") and string.find(fruit.Name, "Fruit") then
            local distance = (Players.LocalPlayer.Character.HumanoidRootPart.Position - fruit.Handle.Position).magnitude
            if distance < nearestDistance then
                nearestFruit, nearestDistance = fruit, distance
            end
        end
    end
    return nearestFruit
end

local function CollectFruit(fruit)
    if fruit and fruit:FindFirstChild("Handle") then
        Players.LocalPlayer.Character.HumanoidRootPart.CFrame = fruit.Handle.CFrame
        wait(0.5) -- Chá» má»™t chÃºt Ä‘á»ƒ nháº·t trÃ¡i
        fireproximityprompt(fruit.Handle:FindFirstChildWhichIsA("ProximityPrompt"))
        Notify("Nháº·t thÃ nh cÃ´ng: " .. fruit.Name)
    end
end

local function StoreFruit()
    local fruitTool = Players.LocalPlayer.Backpack:FindFirstChildWhichIsA("Tool")
    if fruitTool then
        local args = {"StoreFruit", fruitTool}
        ReplicatedStorage.Remotes.CommF_:InvokeServer(unpack(args))
        Notify("ÄÃ£ lÆ°u vÃ o kho: " .. fruitTool.Name)
    end
end

-- Báº£ng thá»‘ng kÃª
local fruitsCollected = 0
local startTime = os.time()

local function DisplayStats()
    while _G.AutoCollectFruits do
        local elapsedTime = os.time() - startTime
        rconsoleprint("\n--- THá»NG KÃŠ AUTO NHáº¶T TRÃI ---")
        rconsoleprint("\nðŸ•’ Thá»i gian cháº¡y: " .. elapsedTime .. " giÃ¢y")
        rconsoleprint("\nðŸ Sá»‘ trÃ¡i Ä‘Ã£ nháº·t: " .. fruitsCollected)
        wait(5)
    end
end

-- Tá»± Ä‘á»™ng Ä‘á»•i server náº¿u khÃ´ng cÃ³ trÃ¡i
local function ServerHop()
    local servers = HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/2753915549/servers/Public?sortOrder=Asc&limit=100")).data
    for _, server in pairs(servers) do
        if server.playing < server.maxPlayers and server.id ~= game.JobId then
            Notify("KhÃ´ng cÃ³ trÃ¡i! Äang chuyá»ƒn server...")
            TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, Players.LocalPlayer)
            break
        end
    end
end

-- Cháº¡y Auto nháº·t trÃ¡i
spawn(DisplayStats)

while _G.AutoCollectFruits do
    local fruit = FindNearestFruit()
    if fruit then
        CollectFruit(fruit)
        fruitsCollected = fruitsCollected + 1
        StoreFruit()
    else
        Notify("KhÃ´ng tÃ¬m tháº¥y trÃ¡i Ã¡c quá»·!")
        if _G.AutoServerHop then
            ServerHop()
        end
    end
    wait(10) -- Kiá»ƒm tra láº¡i má»—i 10 giÃ¢y
end
