_G.AutoCollectFruits = true   -- B·∫≠t/t·∫Øt Auto nh·∫∑t tr√°i
_G.AutoCollectBerries = true  -- B·∫≠t/t·∫Øt Auto nh·∫∑t Berry
_G.AutoServerHop = true       -- B·∫≠t/t·∫Øt Auto ƒë·ªïi server n·∫øu kh√¥ng c√≥ g√¨ ƒë·ªÉ nh·∫∑t

local speed = 350  -- T·ªëc ƒë·ªô bay ƒë·∫øn m·ª•c ti√™u
local startTime = os.time()  -- Th·ªùi gian b·∫Øt ƒë·∫ßu script (kh√¥ng reset)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
repeat wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")

-- T·∫†O GUI MENU
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoFruitMenu"
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 220)
mainFrame.Position = UDim2.new(0.5, -150, 0.1, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)  -- Full ƒëen
mainFrame.Parent = screenGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0.15, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = Color3.new(1, 1, 1)  -- Ch·ªØ tr·∫Øng
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextScaled = true
titleLabel.Text = "Auto Fruit & Berry - Blox Fruits"
titleLabel.Parent = mainFrame

local usernameLabel = Instance.new("TextLabel")
usernameLabel.Size = UDim2.new(1, 0, 0.12, 0)
usernameLabel.Position = UDim2.new(0, 0, 0.15, 0)
usernameLabel.BackgroundTransparency = 1
usernameLabel.TextColor3 = Color3.new(1, 1, 1)
usernameLabel.Font = Enum.Font.SourceSans
usernameLabel.TextScaled = true
usernameLabel.Text = "Ng∆∞·ªùi ch∆°i: " .. player.Name
usernameLabel.Parent = mainFrame

local userImage = Instance.new("ImageLabel")
userImage.Size = UDim2.new(0, 60, 0, 60)
userImage.Position = UDim2.new(0.5, -30, 0.3, 0)
userImage.BackgroundTransparency = 1
userImage.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=420&height=420&format=png"
userImage.Parent = mainFrame

local discordButton = Instance.new("TextButton")
discordButton.Size = UDim2.new(0.6, 0, 0.12, 0)
discordButton.Position = UDim2.new(0.2, 0, 0.6, 0)
discordButton.BackgroundColor3 = Color3.fromRGB(30, 144, 255)
discordButton.TextColor3 = Color3.new(1, 1, 1)
discordButton.Font = Enum.Font.SourceSansBold
discordButton.TextScaled = true
discordButton.Text = "üí¨ Discord"
discordButton.Parent = mainFrame
discordButton.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/3Tp35BhYeG")
end)

local timeLabel = Instance.new("TextLabel")
timeLabel.Size = UDim2.new(1, 0, 0.12, 0)
timeLabel.Position = UDim2.new(0, 0, 0.75, 0)
timeLabel.BackgroundTransparency = 1
timeLabel.TextColor3 = Color3.new(1, 1, 1)
timeLabel.Font = Enum.Font.SourceSans
timeLabel.TextScaled = true
timeLabel.Text = "Th·ªùi gian ch·∫°y: 00:00:00"
timeLabel.Parent = mainFrame

-- C·∫≠p nh·∫≠t th·ªùi gian ch·∫°y script (kh√¥ng reset)
spawn(function()
    while true do
        local elapsed = os.time() - startTime
        local hours = math.floor(elapsed / 3600)
        local minutes = math.floor((elapsed % 3600) / 60)
        local seconds = elapsed % 60
        timeLabel.Text = string.format("Th·ªùi gian ch·∫°y: %02d:%02d:%02d", hours, minutes, seconds)
        wait(1)
    end
end)

-- H√ÄM T√åM ƒê·ªêI T∆Ø·ª¢NG
local function FindNearestItem(itemName)
    local nearestItem, nearestDistance = nil, math.huge
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return nil end

    for _, item in pairs(game.Workspace:GetChildren()) do
        if item:IsA("Model") and item:FindFirstChild("Handle") and string.find(item.Name, itemName) then
            local distance = (hrp.Position - item.Handle.Position).Magnitude
            if distance < nearestDistance then
                nearestItem, nearestDistance = item, distance
            end
        end
    end
    return nearestItem
end

-- BAY ƒê·∫æN M·ª§C TI√äU (KH√îNG TELEPORT)
local function FlyToItem(item)
    if not item or not item:FindFirstChild("Handle") then return end
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local targetPos = item.Handle.Position
    local tweenInfo = TweenInfo.new((hrp.Position - targetPos).Magnitude / speed, Enum.EasingStyle.Linear)
    local tween = TweenService:Create(hrp, tweenInfo, {CFrame = CFrame.new(targetPos)})
    tween:Play()
    tween.Completed:Wait()

    wait(0.3)  -- Ch·ªù ·ªïn ƒë·ªãnh
    local prompt = item.Handle:FindFirstChildWhichIsA("ProximityPrompt")
    if prompt then
        fireproximityprompt(prompt)
    end
end

-- L∆ØU TR√ÅI V√ÄO KHO
local function StoreFruit()
    local fruitTool = player.Backpack:FindFirstChildWhichIsA("Tool")
    if fruitTool then
        local args = {"StoreFruit", fruitTool}
        local success, _ = pcall(function()
            return ReplicatedStorage.Remotes.CommF_:InvokeServer(unpack(args))
        end)
        
        return success
    end
    return false
end

-- ƒê·ªîI SERVER
local function ServerHop()
    local url = "https://games.roblox.com/v1/games/2753915549/servers/Public?sortOrder=Asc&limit=100"
    local servers = HttpService:JSONDecode(game:HttpGet(url)).data
    for _, server in pairs(servers) do
        if server.playing < server.maxPlayers and server.id ~= game.JobId then
            TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, player)
            break
        end
    end
end

-- V√íNG L·∫∂P AUTO NH·∫∂T
while _G.AutoCollectFruits or _G.AutoCollectBerries do
    local foundItem = false

    if _G.AutoCollectFruits then
        local fruit = FindNearestItem("Fruit")
        if fruit then
            FlyToItem(fruit)
            wait(1)  -- Ch·ªù nh·∫∑t xong

            -- C·ªë g·∫Øng l∆∞u tr·ªØ, n·∫øu kh√¥ng ƒë∆∞·ª£c th√¨ nh·∫∑t ti·∫øp
            if not StoreFruit() then
                continue
            end
            foundItem = true
        end
    end

    if _G.AutoCollectBerries then
        local berry = FindNearestItem("Berry")
        if berry then
            FlyToItem(berry)
            foundItem = true
        end
    end

    if not foundItem and _G.AutoServerHop then
        ServerHop()
    end

    wait(5)  -- Ki·ªÉm tra l·∫°i sau m·ªói 5 gi√¢y
end
